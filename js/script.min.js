var orgChart=function(){var t={version:"1.0.1",cutString:function(t,e){try{return e<0?t:t.length>e?t.substring(0,e-3)+"...":t}catch(e){return t}},convertJSON2LowerCase:function(e){try{var r={};for(i in e)"[object Object]"===Object.prototype.toString.apply(e[i])?r[i.toLowerCase()]=t.convertJSON2LowerCase(e[i]):"[object Array]"===Object.prototype.toString.apply(e[i])?(r[i.toLowerCase()]=[],r[i.toLowerCase()].push(t.convertJSON2LowerCase(e[i][0]))):r[i.toLowerCase()]=e[i];return r}catch(t){return}},link:function(t){return window.location=t},escapeHTML:function(t){if(null===t)return null;if(void 0!==t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(t){}try{return apex.util.escapeHTML(String(t))}catch(e){return(t=String(t)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}},loader:{start:function(t){try{apex.util.showSpinner($(t))}catch(a){var e=$("<span></span>");e.attr("id","loader"+t),e.addClass("ct-loader fa-stack fa-3x");var r=$("<i></i>");r.addClass("fa fa-circle fa-stack-2x"),r.css("color","rgba(121,121,121,0.6)");var n=$("<i></i>");n.addClass("fa fa-refresh fa-spin fa-inverse fa-stack-1x"),n.css("animation-duration","1.8s"),e.append(r),e.append(n),$(t).append(e)}},stop:function(t){$(t+" > .u-Processing").remove(),$(t+" > .ct-loader").remove()}},tooltip:{show:function(t,e,r){try{if(0==$("#dynToolTip").length){var n=$("<div></div>").attr("id","dynToolTip").css("max-width","400px").css("position","absolute").css("top","0px").css("left","0px").css("z-index","2000").css("background-color","rgba(240, 240, 240, 1)").css("padding","10px").css("display","block").css("top","0").css("overflow-wrap","break-word").css("word-wrap","break-word").css("-ms-hyphens","auto").css("-moz-hyphens","auto").css("-webkit-hyphens","auto").css("hyphens","auto");e&&n.css("background-color",e),r&&n.css("max-width",r),$("body").append(n)}else $("#dynToolTip").css("visibility","visible");$("#dynToolTip").html(t)}catch(t){console.error("Error while try to show tooltip"),console.error(t)}},setPosition:function(t){$("#dynToolTip").position({my:"left+6 top+6",of:t,collision:"flipfit"})},hide:function(){$("#dynToolTip").css("visibility","hidden")},remove:function(){$("#dynToolTip").remove()}},jsonSaveExtend:function(t,e){var r={};if("string"==typeof e)try{e=JSON.parse(e)}catch(t){console.error("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.error(t),console.error(e)}else r=e;try{r=$.extend(!0,t,e)}catch(e){console.error("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.error(e),r=t,console.error(r)}return r},noDataMessage:{show:function(t,e){var r=$("<div></div>").css("margin","12px").css("text-align","center").css("padding","64px 0").addClass("nodatafoundmessage"),n=$("<div></div>"),a=$("<span></span>").addClass("fa").addClass("fa-search").addClass("fa-2x").css("height","32px").css("width","32px").css("color","#D0D0D0").css("margin-bottom","16px");n.append(a);var i=$("<span></span>").text(e).css("display","block").css("color","#707070").css("font-size","12px");r.append(n).append(i),$(t).append(r)},hide:function(t){$(t).children(".nodatafoundmessage").remove()}}};return{initTree:function(e,r,n,a,i,o){var l={};(l=t.jsonSaveExtend({modus:"diagonal",refresh:0,minHeight:"450px",transitionDuration:750,rectangleWidth:150,rectangleHeight:60,rectangleSpacing:10,rectangleColor:"rgba(41, 128, 185, 1)",rectangleLeafColor:"rgba(121, 121, 121, 1)",cutTextAfter:30,textColor:"white"},a)).regionID=e,l.ajaxID=r,l.noDataMessage=n,l.items2Submit=i,!1!==o&&(l.escapeHTML=!0),"line"==l.modus?l.fixedDepth=80:l.fixedDepth=110,$(l.regionID).css("min-height",l.minHeight);var s,c,d,h={},p=[],u=0,g=null,f=null,m=null,x=null,y=null,v=null,b=0,w=function(t){t.children&&(t.childCount=t.children.length,t._children=t.children,t._children.forEach(w),t.children=null)},I=function(e){function r(t){t.details.title?$("#modal-title").text(t.details.title):$("#modal-table-title").html("-"),t.name?$("#modal-table-method").html(t.name):$("#modal-table-method").html("-"),t.details.description?$("#modal-table-description").html(t.details.description):$("#modal-table-description").html("-"),t.details.path?$("#modal-table-path").html(t.details.path.replace(/\{/g,'<span class="path-variables">{').replace(/\}/g,"}</span>")):$("#modal-table-path").html("-"),t.details.uri_params?$("#modal-table-uri-params").html(t.details.uri_params.replace(/\{/g,'<span class="path-variables">{').replace(/\}/g,"}</span>")):$("#modal-table-uri-params").html("-"),t.details.headers?$("#modal-table-headers").html(t.details.headers.replace(/\{/g,'<span class="path-variables">{').replace(/\}/g,"}</span>")):$("#modal-table-headers").html("-"),t.details.example?$("#modal-table-example").html(t.details.example):$("#modal-table-example").html("-")}p=m.nodes(h).reverse();var n=m.links(p);p.forEach(function(t){t.y=t.depth*l.fixedDepth});var a=f.selectAll("g.node").data(p,function(t){return t.children&&(t.childCount=1),t.id||(t.id=++u)}),i=a.enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+e.x0+","+e.y0+")"}).on("click",C);i.append("rect").attr("width",l.rectangleWidth).attr("height",l.rectangleHeight).attr("fill","#898989").attr("filter","url(#boxShadow)"),i.append("rect").attr("width",l.rectangleWidth).attr("height",l.rectangleHeight).attr("id",function(t){return t.id}).attr("fill",function(t){return t.color?t.color:t.childCount>0?l.rectangleColor:l.rectangleLeafColor}).style("cursor",function(t){return t.childCount>0?"pointer":"default"}).attr("class","box").on("click",function(e){e.link&&e.link.length>0&&0==e.childCount&&t.link(e.link),e.details&&($("#detailsmodal").modal("show"),r(e))}).on("mousemove",function(e){if(e.tooltip&&e.tooltip.length>0){var r=e.tooltip;l.escapeHTML&&(r=t.escapeHTML(r)),t.tooltip.show(r)}t.tooltip.setPosition(d3.event)}).on("mouseout",function(){t.tooltip.hide()}),i.append("text").attr("x",l.rectangleWidth/2).attr("y",l.rectangleHeight/2).attr("dy",".35em").attr("class","org-chart-label-text").attr("text-anchor","middle").attr("fill",l.textColor).style("cursor",function(t){return t.childCount>0?"pointer":"default"}).text(function(e){return t.cutString(e.name,l.cutTextAfter)}).on("click",function(e){e.link&&e.link.length>0&&0==e.childCount&&t.link(e.link),e.details&&($("#detailsmodal").modal("show"),r(e))}).on("mousemove",function(e){if(e.tooltip&&e.tooltip.length>0){var r=e.tooltip;l.escapeHTML&&(r=t.escapeHTML(r)),t.tooltip.show(r)}t.tooltip.setPosition(d3.event)}).on("mouseout",function(){t.tooltip.hide()});a.transition().duration(l.transitionDuration).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).select("rect.box").attr("fill",function(t){return t.color?t.color:t.childCount>0?l.rectangleColor:l.rectangleLeafColor});a.exit().transition().duration(l.transitionDuration).attr("transform",function(t){return"translate("+e.x+","+e.y+")"}).remove();var o=f.selectAll("path.link").data(n,function(t){return t.target.id});"line"===l.modus?(o.enter().append("path","g").attr("class","link").attr("d",function(t){var e=function(t){return[{x:t.source.x0+parseInt(l.rectangleWidth/2),y:t.source.y0+l.rectangleHeight+2},{x:t.source.x0+parseInt(l.rectangleWidth/2),y:t.source.y0+l.rectangleHeight+2},{x:t.source.x0+parseInt(l.rectangleWidth/2),y:t.source.y0+l.rectangleHeight+2},{x:t.source.x0+parseInt(l.rectangleWidth/2),y:t.source.y0+l.rectangleHeight+2}]}(t);return y(e)}),o.transition().duration(l.transitionDuration).attr("d",function(t){var e=function(t){return[{x:t.source.x+parseInt(l.rectangleWidth/2),y:t.source.y+l.rectangleHeight},{x:t.source.x+parseInt(l.rectangleWidth/2),y:t.target.y-10},{x:t.target.x+parseInt(l.rectangleWidth/2),y:t.target.y-10},{x:t.target.x+parseInt(l.rectangleWidth/2),y:t.target.y}]}(t);return y(e)}),o.exit().transition().duration(l.transitionDuration).attr("d",function(t){var e=[{x:v.x+parseInt(l.rectangleWidth/2),y:v.y+l.rectangleHeight+2},{x:v.x+parseInt(l.rectangleWidth/2),y:v.y+l.rectangleHeight+2},{x:v.x+parseInt(l.rectangleWidth/2),y:v.y+l.rectangleHeight+2},{x:v.x+parseInt(l.rectangleWidth/2),y:v.y+l.rectangleHeight+2}];return y(e)}).each("end",function(){v=null})):"diagonal"===l.modus&&(o.enter().insert("path","g").attr("class","link").attr("x",l.rectangleWidth/2).attr("y",l.rectangleHeight/2).attr("d",function(t){var r={x:e.x0,y:e.y0};return x({source:r,target:r})}),o.transition().duration(l.transitionDuration).attr("d",x),o.exit().transition().duration(l.transitionDuration).attr("d",function(t){var r={x:e.x,y:e.y};return x({source:r,target:r})}).remove()),p.forEach(function(t){t.x0=t.x,t.y0=t.y})},C=function(t){(t.children||t._children||!t.hasChild)&&(t.children?(v=t,b=0,t._children=t.children,t.children=null):(v=t,b=1,t.children=t._children,t._children=null),I(t))},D=function(){f.attr("transform","translate("+d3.event.translate+") scale("+d3.event.scale.toFixed(1)+")")},S=function(){$(l.regionID).empty();try{s=$(l.regionID).innerWidth(),c=$(l.regionID).innerHeight(),m=d3.layout.tree().nodeSize([l.rectangleWidth+l.rectangleSpacing,l.rectangleHeight+l.rectangleSpacing]),x=d3.svg.diagonal().projection(function(t){return[t.x+l.rectangleWidth/2,t.y+l.rectangleHeight/2]}),y=d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linear"),d=h.children?parseInt(h.children.length*l.rectangleWidth/2):parseInt(h._children.length*l.rectangleWidth/2),g=d3.select(l.regionID).append("svg").attr("width",s).attr("height",c).call(zm=d3.behavior.zoom().scaleExtent([.15,3]).on("zoom",D)),f=g.append("g").attr("transform","translate("+parseInt(d+(s-2.4*d)/2)+",20)"),function(t){var e=g.append("svg:defs").append("svg:filter").attr("id",t).attr("height","150%").attr("width","150%");e.append("svg:feOffset").attr("dx","2").attr("dy","2").attr("result","offOut"),e.append("svg:feGaussianBlur").attr("in","offOut").attr("result","blurOut").attr("stdDeviation","2"),e.append("svg:feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal")}("boxShadow"),zm.translate([parseInt(d+(s-2.4*d)/2),20]),h.x0=0,h.y0=c/2,h.children?h.children.forEach(w):(h.children=h._children,h.children.forEach(w)),I(h),d3.select(l.regionID).style("height",c)}catch(e){t.loader.stop(l.regionID),console.log("error while try draw Chart"),console.log(e)}},k=function(e){try{if(e.row&&e.row.length>0){h=t.convertJSON2LowerCase(e.row);var r=[];for(var n in h)r.push(h[n]);h=(h=function(t){var e,r,n,a,i,o,l,s,c;for(n=t.id||"id",i=t.parent_id||"parent_id",e=t.children||"children",o={},a=[],l=0,s=(c=t.q).length;l<s;l++)(r=c[l])[e]=[],o[r[n]]=r,null!=o[r[i]]?o[r[i]][e].push(r):a.push(r);return a}({q:h=function(t){var e,r,n,a,i,o,l,s,c,d,h,p,u,g,f;for(a=t.id||"id",o=t.parent_id||"parent_id",s=[],l={},e={},i=[],n=d=0,p=(g=t.q).length;d<p;n=++d)l[(r=g[n])[a]]=n,null==e[r[o]]&&(e[r[o]]=[]),e[r[o]].push(t.q[n][a]);for(h=0,u=(f=t.q).length;h<u;h++)null==l[(r=f[h])[o]]&&s.push(r[a]);for(;s.length;)c=s.splice(0,1),i.push(t.q[l[c]]),null!=e[c]&&(s=e[c].concat(s));return i}({q:r})}))[0],S()}else $(l.regionID).empty(),t.noDataMessage.show(l.regionID,l.noDataMessage)}catch(e){t.loader.stop(l.regionID),$(l.regionID).empty(),console.log("error while try to prepare data for draw Chart"),console.log(e)}},H=function(e){t.loader.start(l.regionID),apex.server.plugin(l.ajaxID,{pageItems:l.items2Submit},{success:e,error:function(e){t.loader.stop(l.regionID),$(l.regionID).empty(),console.log(e.responseText)},dataType:"json"})};H(k),$(l.regionID).contextmenu(function(){return S(),!1}),$("#"+e.substring(6)).bind("apexrefresh",function(){0==$(l.regionID).children("span").length&&H(k)}),l.refresh>0&&setInterval(function(){0==$(l.regionID).children("span").length&&H(k)},1e3*l.refresh),apex.jQuery(window).on("apexwindowresized",function(t){s=$(l.regionID).innerWidth(),c=$(l.regionID).innerHeight(),d=h.children?parseInt(h.children.length*l.rectangleWidth/2):parseInt(h._children.length*l.rectangleWidth/2),f.attr("transform","translate("+parseInt(d+(s-2.4*d)/2)+",20)"),zm.translate([parseInt(d+(s-2.4*d)/2),20]),g.attr("width",s).attr("height",c)})}}}();